package dao.entities;

import static org.junit.Assert.fail;

import java.io.File;

import oap.utils.exceptions.MyException;
import oap.utils.exceptions.NonUniqueDataException;
import oap.utils.xml.enums.DatabaseName;

import org.junit.After;
import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;

import db.dao.DbDao;
import db.structure.items.implementation.Ferryman;

public class FerrymanDaoImplTest {
	private FerrymanDao ferrymanDao;

	@Before
	public void setup() {
		if (new File(DatabaseName.TEST_DB.getFileName()).exists()) {
			new File(DatabaseName.TEST_DB.getFileName()).delete();
		}

		ferrymanDao = new FerrymanDaoImpl(DatabaseName.TEST_DB);
	}

	@After
	public void reset(){
		DbDao.resetInstance();
	}
	
	
	@Test
	public void shouldCreateFerryman() {
		Ferryman ferryman= new Ferryman();
		ferryman.setName("AAA");
		
		Ferryman ferrymanFromDb=null;
		try {
			ferrymanFromDb=ferrymanDao.createFerryman(ferryman);
		} catch (MyException e) {
			fail("Not performed");
		}
		
		Assert.assertEquals(ferryman,ferrymanFromDb);
		
		
	}
	
	@Test(expected=NonUniqueDataException.class)
	public void shouldCreateFerrymanThrowNonUniqueDataException() throws NonUniqueDataException{
		Ferryman ferryman= new Ferryman();
		ferryman.setName("AAA");
		
		Ferryman ferrymanFromDb=null;
			ferrymanFromDb=ferrymanDao.createFerryman(ferryman);
		
		Assert.assertEquals(ferryman,ferrymanFromDb);
		
		
	}

	@Test
	public void shouldUpdateFerryman() {
		fail("Not yet implemented");
	}

	@Test
	public void shouldDeleteFerryman() {
		fail("Not yet implemented");
	}

	@Test
	public void shouldFindFerrymanByName() {
		fail("Not yet implemented");
	}

}
