package tools.xml.implementation;

import java.util.ArrayList;
import java.util.Date;

import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;

import tools.xml.XMLReaderAndWriter;
import db.structure.items.implementation.Ferryman;
import db.structure.items.implementation.Root;
import db.structure.items.implementation.SystemXML;
import db.structure.items.implementation.User;

public class XMLReaderAndWriterImplTest {
	private XMLReaderAndWriter xmlRAW;
	private String testDBFileName ="testDb.xml";
	
	@Before
	public void setup(){
		xmlRAW=XMLReaderAndWriterImpl.getInstance();
	}
	
	
	
	
	@Test
	public void shouldAddOneUser(){
		SystemXML systemXML=new SystemXML();
		systemXML.setRoot(new Root());
		systemXML.getRoot().setUsers(new ArrayList<User>());
		User user = new User();
		user.setId(1L);
		user.setName("AAA");
		user.setSurname("BBB");
		user.setLogin("LOGIN");
		user.setPassword("PASSWOORD");
		user.setInsertDate(new Date());
		user.setUpdateDate(new Date());
		systemXML.getRoot().getUsers().add(user);
		
		xmlRAW.writeSystemXML(systemXML);
		
		SystemXML systemXML2 = xmlRAW.readSystemXML();
		
		
		Assert.assertEquals(user, systemXML2.getRoot().getUsers().get(0));
	}
	
	
	@Test
	public void shouldAddOneFerryman(){
		SystemXML systemXML=new SystemXML();
		systemXML.setRoot(new Root());
		systemXML.getRoot().setUsers(new ArrayList<User>());
		Ferryman ferryman = new Ferryman();
		ferryman.setId(1L);
		ferryman.setName("AAA");
		ferryman.setInsertDate(new Date());
		ferryman.setUpdateDate(new Date());
		systemXML.getRoot().getFerrymans().add(ferryman);
		
		xmlRAW.writeSystemXML(systemXML);
		
		SystemXML systemXML2 = xmlRAW.readSystemXML();
		
		
		Assert.assertEquals(ferryman, systemXML2.getRoot().getUsers().get(0));
	}

}
